# Go
# Build and test your Go application.
# Add steps that save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/go

resources:
  containers:
    - container: go-1.11.2
      image: golang:1.11.2
    - container: go-1.11.1
      image: golang:1.11.1

trigger:
  - master

jobs:
  - job: do_a
    container: go-1.11.1
    steps:
      - script: |
          go version
          go test ./...
          go build

  - job: do_b
    container: go-1.11.2
    steps:
      - script: |
          go version
          go test ./...
          go build

  - job: build_container
    container: go-1.11.2
    dependsOn:
      - do_a
      - do_b
    steps:
      - script: |
          docker build -t foo .
